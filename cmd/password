if (empty($value)) {
	$value = 7;
}else{
	$value = (int)$value;
}

if (is_numeric($value) && $value[0] != '-' && $value <= 21) {
	
	if ($ex[6] == 'sym') {
		$string = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!@£$%^&*()';
		$length = 72;
	}else{
		$string = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890';
		$length = 62;
	}
	
	$count = 1;
	while($count <= $value) {
		$random = rand(0, $length);
		$result = "{$result}{$string[$random]}";
		$count = $count + 1;
	}
	
	$sendchannel = $ex[2];
	if ($sendchannel[0] == '#') {
		send("The password you requested has been sent to you via private message.");
		normal("Randomly chosen password which is {$value} characters long: {$result}.", $usernick);
	}else{
		send("Randomly chosen password which is {$value} characters long: {$result}.");
	}
	
	$result = '';
		
}else{
	send("The length you provided was either not a valid integer, a negative number, or too long.");
}